{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\KimHaeno\\\\Week3_web\\\\week3\\\\src\\\\LoginPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useContext } from \"react\";\nimport { ToastContainer } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport { toast } from \"react-toastify\";\nimport \"./LoginPage.css\";\nimport { useHistory } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { UserDataContext, UserDataProvider } from \"./UserDataContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst IPV4 = \"172.10.5.129\";\nconst LoginPage = () => {\n  _s();\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const {\n    userData,\n    setUserData\n  } = useContext(UserDataContext);\n  const navigate = useNavigate();\n  useEffect(() => {\n    if (userData) {\n      console.log(\"--UserData--\");\n      console.log(userData);\n      navigate(\"/Mainpage\", {\n        state: {\n          user: userData\n        }\n      });\n    }\n  }, [userData, navigate]);\n  const handleEmailChange = e => {\n    setEmail(e.target.value);\n  };\n  const handlePasswordChange = e => {\n    setPassword(e.target.value);\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      const response = await axios.post(`http://${IPV4}:443/login`, {\n        email,\n        password\n      });\n      if (response.data.status === \"ok\") {\n        setUserData(response.data);\n        toast.success(`${response.data.nickname}님, 반갑습니다!`, {\n          autoClose: 500\n        });\n        setTimeout(() => {\n          navigate(\"/Mainpage\", {\n            state: {\n              user: userData\n            }\n          });\n        }, 1000);\n      } else {\n        toast.error(response.data.message, {\n          autoClose: 500\n        });\n      }\n    } catch (err) {\n      console.error(err);\n      toast.error(\"아이디와 비밀번호를 확인해주세요.\");\n    }\n  };\n  const handleClick = path => {\n    navigate(path);\n  };\n  if (isLoggedIn) {\n    return /*#__PURE__*/_jsxDEV(Redirect, {\n      to: \"/main\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 16\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(UserDataProvider, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(ToastContainer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"\\uB108 T\\uC57C?\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"input-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"email\",\n            children: \"\\uC774\\uBA54\\uC77C:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"email\",\n            id: \"email\",\n            value: email,\n            onChange: handleEmailChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"input-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"password\",\n            children: \"\\uBE44\\uBC00\\uBC88\\uD638:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            id: \"password\",\n            value: password,\n            onChange: handlePasswordChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"buttt\",\n          type: \"submit\",\n          children: \"\\uB85C\\uADF8\\uC778\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"register-btn\",\n        type: \"submit\",\n        onClick: () => handleClick(\"/signup\"),\n        children: \"\\uD68C\\uC6D0 \\uAC00\\uC785\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 9\n  }, this);\n};\n_s(LoginPage, \"J7JfHaiHR1ybO7Efuaa4kozUOh8=\", true);\n_c = LoginPage;\nexport default LoginPage;\nvar _c;\n$RefreshReg$(_c, \"LoginPage\");","map":{"version":3,"names":["React","useState","useEffect","useContext","ToastContainer","toast","useHistory","axios","UserDataContext","UserDataProvider","jsxDEV","_jsxDEV","IPV4","LoginPage","_s","email","setEmail","password","setPassword","userData","setUserData","navigate","useNavigate","console","log","state","user","handleEmailChange","e","target","value","handlePasswordChange","handleSubmit","preventDefault","response","post","data","status","success","nickname","autoClose","setTimeout","error","message","err","handleClick","path","isLoggedIn","Redirect","to","fileName","_jsxFileName","lineNumber","columnNumber","children","className","onSubmit","htmlFor","type","id","onChange","onClick","_c","$RefreshReg$"],"sources":["C:/Users/KimHaeno/Week3_web/week3/src/LoginPage.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\r\nimport { ToastContainer } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport { toast } from \"react-toastify\";\r\nimport \"./LoginPage.css\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { UserDataContext, UserDataProvider } from \"./UserDataContext\";\r\n\r\nconst IPV4 = \"172.10.5.129\";\r\n\r\nconst LoginPage = () => {\r\n    const [email, setEmail] = useState(\"\");\r\n    const [password, setPassword] = useState(\"\");\r\n    const { userData, setUserData } = useContext(UserDataContext);\r\n\r\n    const navigate = useNavigate();\r\n\r\n    useEffect(() => {\r\n        if (userData) {\r\n        console.log(\"--UserData--\");\r\n        console.log(userData);\r\n\r\n        navigate(\"/Mainpage\", { state: { user: userData } });\r\n        }\r\n    }, [userData, navigate]);\r\n\r\n    const handleEmailChange = (e) => {\r\n        setEmail(e.target.value);\r\n    };\r\n\r\n    const handlePasswordChange = (e) => {\r\n        setPassword(e.target.value);\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n\r\n        try {\r\n        const response = await axios.post(`http://${IPV4}:443/login`, {\r\n            email,\r\n            password,\r\n        });\r\n\r\n        if (response.data.status === \"ok\") {\r\n            setUserData(response.data);\r\n            toast.success(`${response.data.nickname}님, 반갑습니다!`, {\r\n            autoClose: 500,\r\n            });\r\n\r\n            setTimeout(() => {\r\n            navigate(\"/Mainpage\", { state: { user: userData } });\r\n            }, 1000);\r\n        } else {\r\n            toast.error(response.data.message, {\r\n            autoClose: 500,\r\n            });\r\n        }\r\n        } catch (err) {\r\n        console.error(err);\r\n        toast.error(\"아이디와 비밀번호를 확인해주세요.\");\r\n        }\r\n    };\r\n\r\n    const handleClick = (path) => {\r\n        navigate(path);\r\n    };\r\n\r\n    if (isLoggedIn) {\r\n        return <Redirect to=\"/main\" />;\r\n    }\r\n\r\n    return (\r\n        <UserDataProvider>\r\n            <div className=\"container\">\r\n                <ToastContainer />\r\n                <h1>너 T야?</h1>\r\n                <form onSubmit={handleSubmit}>\r\n                <div className=\"input-group\">\r\n                    <label htmlFor=\"email\">이메일:</label>\r\n                    <input\r\n                    type=\"email\"\r\n                    id=\"email\"\r\n                    value={email}\r\n                    onChange={handleEmailChange}\r\n                    />\r\n                </div>\r\n                <div className=\"input-group\">\r\n                    <label htmlFor=\"password\">비밀번호:</label>\r\n                    <input\r\n                    type=\"password\"\r\n                    id=\"password\"\r\n                    value={password}\r\n                    onChange={handlePasswordChange}\r\n                    />\r\n                </div>\r\n                <button className=\"buttt\" type=\"submit\">\r\n                    로그인\r\n                </button>\r\n                </form>\r\n                <button\r\n                className=\"register-btn\"\r\n                type=\"submit\"\r\n                onClick={() => handleClick(\"/signup\")}\r\n                >\r\n                회원 가입\r\n                </button>\r\n            </div>\r\n        </UserDataProvider>\r\n    );\r\n};\r\n\r\nexport default LoginPage;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}